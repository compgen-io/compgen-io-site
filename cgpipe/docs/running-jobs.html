<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Job scheduling - cgpipe</title> <link rel="shortcut icon" href="/cgpipe/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/cgpipe/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-83662616-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-83662616-1'); </script> <script type="text/javascript" src="/cgpipe/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/cgpipe/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Job scheduling | cgpipe</title> <meta name="generator" content="Jekyll v3.8.7" /> <meta property="og:title" content="Job scheduling" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Documentation for the cgpipe project" /> <meta property="og:description" content="Documentation for the cgpipe project" /> <link rel="canonical" href="/cgpipe/docs/running-jobs" /> <meta property="og:url" content="/cgpipe/docs/running-jobs" /> <meta property="og:site_name" content="cgpipe" /> <script type="application/ld+json"> {"@type":"WebPage","url":"/cgpipe/docs/running-jobs","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"/cgpipe/assets/img/compgen-cgpipe.png"}},"headline":"Job scheduling","description":"Documentation for the cgpipe project","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="/cgpipe/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item "><a href="https://compgen.io/" class="navigation-list-link">Home</a></li><li class="navigation-list-item "><a href="https://compgen.io/projects" class="navigation-list-link">Projects</a></li><li class="navigation-list-item subsite"><a href="/cgpipe/" class="navigation-list-link">Projects: cgpipe</a></li><li class="navigation-list-item subsite_child"><a href="/cgpipe/docs/getting-started" class="navigation-list-link">Getting started</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/cgpipe/docs/getting-started/what-is-cgpipe" class="navigation-list-link">What is cgpipe?</a> <ul class="navigation-list-child-list"><li class="navigation-list-item "><a href="/cgpipe/docs/getting-started/quick" class="navigation-list-link">Quick version</a></li></ul></li><li class="navigation-list-item "><a href="/cgpipe/docs/getting-started/installing" class="navigation-list-link">Installation</a> </li><li class="navigation-list-item "><a href="/cgpipe/docs/getting-started/running" class="navigation-list-link">Running cgpipe</a> </li></ul></li><li class="navigation-list-item subsite_child"><a href="/cgpipe/docs/features" class="navigation-list-link">Features</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/cgpipe/docs/features/job-log" class="navigation-list-link">Job log</a> </li><li class="navigation-list-item "><a href="/cgpipe/docs/features/remote-pipelines" class="navigation-list-link">Remote pipelines</a> </li></ul></li><li class="navigation-list-item subsite_child"><a href="/cgpipe/docs/syntax" class="navigation-list-link">Language syntax</a></li><li class="navigation-list-item active subsite_child"><a href="/cgpipe/docs/running-jobs" class="navigation-list-link active">Job scheduling</a></li><li class="navigation-list-item nav_gap subsite_child"><a href="/cgpipe/docs/tutorials" class="navigation-list-link">Tutorials</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="/cgpipe/tutorials/flexible-pipelines" class="navigation-list-link">Tutorial: Flexible pipelines</a> </li><li class="navigation-list-item "><a href="/cgpipe/tutorials/docker-cgpipe" class="navigation-list-link">Tutorial: Docker with cgpipe</a> </li></ul></li><li class="navigation-list-item subsite_child"><a href="https://github.com/compgen-io/cgpipe/releases" class="navigation-list-link">Download</a></li><li class="navigation-list-item nav_gap"><a href="https://compgen.io/contact" class="navigation-list-link">Contact / Help</a></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4"> <!-- <a href="https://compgen.io/"><img src="assets/img/compgen-icon.png" style="float:left; width: 32px;"/> compgen.io</a><br/>data wrangling for <br/>computational genomics --> <a href="https://compgen.io/" class="footer_link"><img src="/cgpipe//assets/img/compgen-slug.png"/></a> </p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search cgpipe docs" aria-label="Search cgpipe" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="//github.com/compgen-io/cgpipe">View cgpipe on GitHub</a></li> </ul> </div> <div class="page"> <div id="main-content" class="page-content" role="main"> <h1 class="no_toc" id="pipeline-backends-batch-schedulers"> <a href="#pipeline-backends-batch-schedulers" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Pipeline backends (batch schedulers) </h1> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#hpc-server-backends" id="markdown-toc-hpc-server-backends">HPC server backends</a></li> <li><a href="#specifying-requirements" id="markdown-toc-specifying-requirements">Specifying requirements</a></li> <li><a href="#runner-specific-configuration" id="markdown-toc-runner-specific-configuration">Runner specific configuration</a> <ol> <li><a href="#template-scripts" id="markdown-toc-template-scripts">Template scripts</a></li> <li><a href="#shell-script-export" id="markdown-toc-shell-script-export">Shell script export</a></li> <li><a href="#simple-batch-scheduler-sbs" id="markdown-toc-simple-batch-scheduler-sbs">Simple Batch Scheduler (SBS)</a></li> <li><a href="#pbs-torquepbs" id="markdown-toc-pbs-torquepbs">PBS (Torque/PBS)</a></li> <li><a href="#sgeoge" id="markdown-toc-sgeoge">SGE/OGE</a></li> <li><a href="#slurm" id="markdown-toc-slurm">SLURM</a></li> </ol> </li> <li><a href="#dry-runs" id="markdown-toc-dry-runs">Dry-runs</a></li> <li><a href="#job-pipeline-graph" id="markdown-toc-job-pipeline-graph">Job pipeline graph</a></li> </ol> <p>Unlike Make, cgpipe does not actually execute pipeline commands. Instead, running the commands is outsourced to a "job runner" or backend. There are a number of supported backends, covering some of the more common HPC schedulers.</p> <p>There are curently 5 available backends for running pipelines: a combined shell script (default), SGE/Open Grid Engine, PBS, SLURM, and single-user SBS (also from compgen.io, see below).</p> <p>Job runners are chosen by setting the configuration value <code class="language-plaintext highlighter-rouge">cgpipe.runner</code> in <code class="language-plaintext highlighter-rouge">$HOME/.cgpiperc</code> to either: 'pbs', 'sge', 'slurm', 'sbs', or 'shell' (default).</p> <p>Example:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cgpipe.runner="sbs"
cgpipe.runner.sbs.sbshome="/home/username/.sbs"
</code></pre></div></div> <p>Like other cgpipe-wide configuration variables, any of these values can be changed on a per-run, per-user, or per-server basis.</p> <h2 id="hpc-server-backends"> <a href="#hpc-server-backends" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> HPC server backends </h2> <p>The most common use-case for CGPipe is running jobs within an HPC context. Currently, the only HPC job schedulers that are supported are SGE/Open Grid Engine and SLURM. CGPipe integrates with these schedulers by dynamically generating job scripts and submitting them to the scheduler by running scheduler-specific programs (qsub/sbatch).</p> <h2 id="specifying-requirements"> <a href="#specifying-requirements" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Specifying requirements </h2> <p>Resource requirements for each job (output-target) can be set on a per-job basis by setting CGPipe variables. Because of the way that variable scoping works, you can set any of the variables below at the script or job level.</p> <div class="table-wrapper"><table class="bigTable"> <thead> <tr> <th style="text-align: left">job setting</th> <th style="text-align: left">description</th> <th style="text-align: center">shell</th> <th style="text-align: center">sge</th> <th style="text-align: center">slurm</th> <th style="text-align: center">pbs</th> <th style="text-align: center">sbs</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">job.name</td> <td style="text-align: left">Name of the job</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.procs</td> <td style="text-align: left">Number of CPUs (per node)</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.walltime</td> <td style="text-align: left">Max wall time for the job</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.mem</td> <td style="text-align: left">Req'd RAM (ex: 2M, 4G) [*]</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.stack</td> <td style="text-align: left">Req'd stack space (ex: 10M)</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.hold</td> <td style="text-align: left">Place a user-hold on the job</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.env (T/F)</td> <td style="text-align: left">Capture the current ENV vars</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.qos</td> <td style="text-align: left">QoS setting</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.project</td> <td style="text-align: left">Project setting</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.priority</td> <td style="text-align: left">Priority setting</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.nice</td> <td style="text-align: left">Job "nice" setting</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.queue</td> <td style="text-align: left">Specific queue to submit job to</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.wd</td> <td style="text-align: left">Working directory</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.account</td> <td style="text-align: left">Billing account</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.mail</td> <td style="text-align: left">Mail job status</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.mailtype</td> <td style="text-align: left">When to send mail</td> <td style="text-align: center"> </td> <td style="text-align: center">[1]</td> <td style="text-align: center">[2]</td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.src</td> <td style="text-align: left">Write the submitted script to a file</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.stdout</td> <td style="text-align: left">Capture stdout to file</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.stderr</td> <td style="text-align: left">Capture stderr to file</td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.shell</td> <td style="text-align: left">Job-specific shell binary</td> <td style="text-align: center">[3]</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.node.property</td> <td style="text-align: left">Property requirement for an exec node</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.node.hostname</td> <td style="text-align: left">Exact host to run job on</td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center">X</td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left"><br /><strong>global job setting</strong></td> <td style="text-align: left"><br /><strong>description</strong></td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> <td style="text-align: center"> </td> </tr> <tr> <td style="text-align: left">job.shexec(T/F)</td> <td style="text-align: left">Exec job; don't submit job</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.nopre (T/F)</td> <td style="text-align: left">Don't include global pre</td> <td style="text-align: center">[4]</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> <tr> <td style="text-align: left">job.nopost(T/F)</td> <td style="text-align: left">Don't include global post</td> <td style="text-align: center">[4]</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> <td style="text-align: center">X</td> </tr> </tbody> </table></div> <blockquote> <p>[*] Memory should be specified as the total amount required for the job, if necessary, cgpipe will re-calculate the per-processor required memory.</p> <p>[1], [2] - job.mailtype has slightly different meanings for SGE and SLURM. The possible values are different for each scheduler.</p> <p>[3] - the shell for the shell runner can be set using the global shell config, but the defaults are "/bin/bash", "/usr/bin/bash", "/usr/local/bin/bash", "/bin/sh" (in that order of priority).</p> <p>[4] - pre and post script are only included once for the shell runner, so if any job includes a pre or post, then the final script will as well.</p> </blockquote> <h2 id="runner-specific-configuration"> <a href="#runner-specific-configuration" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Runner specific configuration </h2> <p>Runner configurations may be set using the form: <code class="language-plaintext highlighter-rouge">cgpipe.runner.{runner_name}.{option}</code>.</p> <p>Each runner has different options, which are listed below.</p> <p>For PBS, SGE, SLURM, and SBS, you have the option: <code class="language-plaintext highlighter-rouge">cgpipe.runner.{runner_name}.global_hold</code>. If <code class="language-plaintext highlighter-rouge">global_hold</code> is <code class="language-plaintext highlighter-rouge">true</code>, then each job will have a user-hold placed on it until the entire pipeline has been submitted. Once the entire pipeline has been submitted (successfully), the user-hold will be released and the pipeline can start. This is useful to make sure that any step of the pipeline will run if and only if the entire pipeline was able to be submitted. This also makes sure that quick running jobs don't finish before their child jobs have been submitted. If there is an issue with submitting any of the jobs, then all jobs will be aborted before they are released for execution.</p> <p>For PBS, SGE, and SLURM, you can also set a global default account by using the <code class="language-plaintext highlighter-rouge">cgpipe.runner.{runner_name}.account</code> option.</p> <h3 id="template-scripts"> <a href="#template-scripts" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Template scripts </h3> <p>PBS, SGE, SLURM, and SBS job runners all operate by processing a job template, setting the appropriate variables, and then calling the appropriate executable to submit the job (<code class="language-plaintext highlighter-rouge">qsub</code>, <code class="language-plaintext highlighter-rouge">sbatch</code>, or <code class="language-plaintext highlighter-rouge">sbs</code>). A basic job template is included in CGPipe for each of these schedulers; however, if you'd like to use your own template, this can be specified by setting the variable <code class="language-plaintext highlighter-rouge">cgpipe.runner.{runner_name}.template</code>. As with all other options, this can be done on an adhoc, per-user or per-host basis. If you'd like to write your own templates, the templates are themselves written as CGPipe scripts and can include logic and flow-control.</p> <ul> <li><a href="https://github.com/compgen-io/cgpipe/blob/master/src/java/io/compgen/cgpipe/runner/PBSTemplateRunner.template.cgp">PBSTemplateRunner.template.cgp</a></li> <li><a href="https://github.com/compgen-io/cgpipe/blob/master/src/java/io/compgen/cgpipe/runner/SBSTemplateRunner.template.cgp">SBSTemplateRunner.template.cgp</a></li> <li><a href="https://github.com/compgen-io/cgpipe/blob/master/src/java/io/compgen/cgpipe/runner/SGETemplateRunner.template.cgp">SGETemplateRunner.template.cgp</a></li> <li><a href="https://github.com/compgen-io/cgpipe/blob/master/src/java/io/compgen/cgpipe/runner/SLURMTemplateRunner.template.cgp">SLURMTemplateRunner.template.cgp</a></li> </ul> <h3 id="shell-script-export"> <a href="#shell-script-export" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Shell script export </h3> <p>Shell scripts will write a single script that contains all of the tasks for a given pipeline as functions in the script. When the script is executed, each of the functions will be executed in order. In case multiple pipelines need to be run, the variable <code class="language-plaintext highlighter-rouge">cgpipe.runner.shell.filename</code> can be set. If this is set, then each successive pipeline will be added to this single script file. CGPipe will manage the appropriate job names to avoid collisions. Additionally, if you write the output to a file, the presence of each output will be checked by the script. This means that only if an output file is missing will a job be executed.</p> <p>By default the script is written to stdout.</p> <p>The shell runner has one specific option that can be set: <code class="language-plaintext highlighter-rouge">cgpipe.runner.shell.autoexec</code>. If this is set, then instead of writing the assembled shell script to stdout, the script will be immediately executed.</p> <h3 id="simple-batch-scheduler-sbs"> <a href="#simple-batch-scheduler-sbs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Simple Batch Scheduler (SBS) </h3> <p>https://github.com/compgen-io/sbs</p> <p>SBS has two other options (<code class="language-plaintext highlighter-rouge">cgpipe.runner.sbs.</code>): <code class="language-plaintext highlighter-rouge">sbshome</code> and <code class="language-plaintext highlighter-rouge">path</code>. <code class="language-plaintext highlighter-rouge">sbshome</code> sets where the SBS job scripts will be tracked. By default this is in the current directory under <code class="language-plaintext highlighter-rouge">.sbs</code>. However, this can be set by the <code class="language-plaintext highlighter-rouge">$SBSHOME</code> environmental variable or overridden by this property. <code class="language-plaintext highlighter-rouge">path</code> is the path to the <code class="language-plaintext highlighter-rouge">sbs</code> program, if it isn't part of your <code class="language-plaintext highlighter-rouge">$PATH</code>.</p> <h3 id="pbs-torquepbs"> <a href="#pbs-torquepbs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> PBS (Torque/PBS) </h3> <p>PBS has three unique options (<code class="language-plaintext highlighter-rouge">cgpipe.runner.pbs.</code>): <code class="language-plaintext highlighter-rouge">trim_jobid</code>, <code class="language-plaintext highlighter-rouge">use_vmem</code> and <code class="language-plaintext highlighter-rouge">ignore_mem</code>. <code class="language-plaintext highlighter-rouge">trim_jobid</code> will trim away the cluster name from the jobid returned from <code class="language-plaintext highlighter-rouge">qsub</code>. If your cluster returns something like "1234.cluster.hostname.org" from qsub, but requires "1234" for <code class="language-plaintext highlighter-rouge">qstat</code>, etc… then this option will trim away the "cluster.hostname.org" from the captured jobid. <code class="language-plaintext highlighter-rouge">use_vmem</code> will set all memory restrictions with <code class="language-plaintext highlighter-rouge">-l vmem=XX</code> as opposed to the default <code class="language-plaintext highlighter-rouge">-l mem=XX</code>. And <code class="language-plaintext highlighter-rouge">ignore_mem</code> will ignore any memory restrictions whatsoever in the job submission script (this may cause problems with your cluster or job scheduler, so use at your own risk).</p> <h3 id="sgeoge"> <a href="#sgeoge" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> SGE/OGE </h3> <p>For SGE, there are two additional options (<code class="language-plaintext highlighter-rouge">cgpipe.runner.sge.</code>): the name of the parallel environment needed to request more than one slot per node (<code class="language-plaintext highlighter-rouge">parallelenv</code>; <code class="language-plaintext highlighter-rouge">-pe</code> in qsub), and if the memory required should be specified per job or per slot (<code class="language-plaintext highlighter-rouge">hvmem_total</code>; <code class="language-plaintext highlighter-rouge">-l h_vmem</code> in qsub). The default parallelenv is named 'smp' and by default <code class="language-plaintext highlighter-rouge">h_vmem</code> is specified on a per-slot basis (<code class="language-plaintext highlighter-rouge">hvmem_total=F</code>).</p> <h3 id="slurm"> <a href="#slurm" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> SLURM </h3> <p>SLURM has no additional options that haven't already been mentioned above.</p> <h2 id="dry-runs"> <a href="#dry-runs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Dry-runs </h2> <p>If you want to see the script that would be sent to the job scheduler, you can specify both the verbose (<code class="language-plaintext highlighter-rouge">-v</code>) and dry-run (<code class="language-plaintext highlighter-rouge">-dr</code>) options to cgpipe and the job scripts that would be submitted will be printed to stdout as opposed to being sent to the job scheduler. This is a good way to troubleshoot parameters and custom templates if needed.</p> <p>These options can be sent to any cgpipe command, or if a script uses the <code class="language-plaintext highlighter-rouge">#!cgpipe</code> or <code class="language-plaintext highlighter-rouge">#!/usr/bin/env cgpipe</code> shebang syntax, these options can be provided directly to that script.</p> <blockquote> <p><em>Options with a single dash (<code class="language-plaintext highlighter-rouge">-</code>) are sent to cgpipe itself whereas options with a double dash (<code class="language-plaintext highlighter-rouge">--</code>) are used as argument to your pipeline.</em></p> </blockquote> <p>The <code class="language-plaintext highlighter-rouge">shell</code> job-runner is also very useful for troubleshooting pipelines, so that one can verify if the job recipe scripts are correct.</p> <h2 id="job-pipeline-graph"> <a href="#job-pipeline-graph" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Job pipeline graph </h2> <p>An included non-executing job runner is also available that converts the job dependency graph into a graphviz model. To use this runner, you need to set <code class="language-plaintext highlighter-rouge">cgpipe.runner="graphviz"</code>. Instead of executing the job tree, this will produce a graphviz dot file to show the dependencies between jobs. This can be used to generate a PDF or PNG image using the Graphviz tools. This does not currently support displaying multiple interconnected pipelines through the the joblog, but that is a possibility for a future version.</p> </div> </div> </div> </div> </body> </html>
