<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

        <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-83662616-1', 'auto');
  ga('send', 'pageview');

</script>


    <base href="https://compgen.io/">
    <title>compgen.io - simple batch scheduler</title>
    <link rel="canonical" href="https://compgen.io/sbs/">

    <link href='https://fonts.googleapis.com/css?family=Lato:400,300,100' rel='stylesheet' type='text/css'>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" crossorigin="anonymous">





<link rel="stylesheet/less" type="text/css" href="/css/style.less" />

<script src="/js/less.min.js" type="text/javascript"></script>
<link rel="shortcut icon" href="/favicon.ico" />

</head>
<body lang="en">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

<div class="header_wrap">
<div class="header">
  <div class="logo"><a href="/"><img src="/img/compgen-logo.png" alt="compgen.io"/></a></div>
  <div class="slogan">data wrangling for<br/>computational genomics</div>
  <ul class="links">
      <li class="links dropdown">
          <a href="/projects" style="padding-right: 0;"><i class="fa fa-cogs"></i>&nbsp;Projects</a>
          <a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="padding-left: 2px;" id="dropdownMenu1">
            <span class="fa fa-sort-down"></span>
            <span class="sr-only">Toggle Projects Dropdown</span>
          </a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
              <li class="dropdown-header">NGS data analysis</li>
            <li><a href="/ngsutilsj">ngsutilsj (newer)</a></li>
            <li><a href="/ngsutils">NGSUtils (older)</a></li>
            <li><a href="/cgsplice">cgsplice</a></li>
            <li><a href="/sqz">SQZ</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Data analysis pipelines</li>
            <li><a href="/cgpipe">cgpipe</a></li>
            <li><a href="/sbs">SBS</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Misc. tools</li>
            <li><a href="/basespace-download">Basespace-download</a></li>
            
            <li><a href="/swalign">swalign</a></li>
            <li><a href="/tabutils">tabutils</a></li>
            <li role="separator" class="divider"></li>
            <li class="dropdown-header">Programming libraries</li>
            <li><a href="/compgen-common">compgen-common</a></li>
            <li><a href="/compgen-cmdline">compgen-cmdline</a></li>
          </ul>
      </li>
      <li class="links"><a href="/tutorials"><i class="fa fa-book"></i>&nbsp;Tutorials</a></li>

      <li class="links"><a href="/citations"><i class="fa fa-external-link-squaref"></i> Citations</a></li>
      <li class="links"><a href="/contact"><i class="fa fa-question-circle"></i>&nbsp;Contact</a></li>


  </ul>
  <div class="clearing">&nbsp;</div>
</div>
</div>

<div class="project_bar_wrap">
  <ul class="project_bar">
    <li class="heading"><a href="/projects">Projects</a> > sbs</li>
    <li class="project_link"><a href="/sbs" class="active">Overview</a></li>
  
    <li class="project_link"><a href="/sbs/docs"><i class="fa fa-book"></i> Docs</a></li>
  
  
    <li class="project_link"><a href="https://github.com/compgen-io/sbs"><i class="fa fa-github"></i> GitHub project</a></li>
  
    <li class="project_link"><a href="https://github.com/compgen-io/sbs/issues"><i class="fa fa-bug"></i> Issues</a></li>


  
    <li class="project_link"><a href="https://github.com/compgen-io/sbs/releases"><i class="fa fa-download"></i> Download</a></li>


  </ul>
</div>
<div class="main_wrap">
  <section id="main">
    <h1 id="title"><i class="fa fa-sitemap fa-rotate-90"></i> Simple Batch Scheduler</h1>
    <div>
          <article id="content" class="tutorial">
             

<p>SBS is a single-user batch job scheduler for workstations or single servers. SBS is a good stand-in for
traditional schedulers like PBS, SGE, or SLURM. Not everyone wants to have a complete install of SGE on
their laptop. In those cases, SBS can be a quick replacement that requires minimal overhead. SBS is a
single file program written in Python that stores job definitions in a managed folder. All job state is
stored in this folder. There is no requirement for a constantly running daemon to manage the jobs.
The user can start running these jobs at anytime and using whatever resource restrictions are necessary (eg if you
have 4 cores on a laptop, but only want to devote 2 cores to running background jobs, you can do that).</p>

<p>SBS runs jobs in a first-available, first run basis. Meaning, the first job that fits the available
resources that is also ready to run (has no pending dependencies) will be run. This simple scheduling
algorithm doesn&rsquo;t take into account wall-time, so it is not as efficient as a more complete backfilling
schdeuler. However, SBS is also a single file, so installation is a lot easier than a proper scheduler!
<code>sbs run</code> does not run as a daemon, so it is best executed in the context of a screen or tmux session.</p>

<p>SBS is also supported by <a href="/cgpipe">cgpipe</a> pipelines as a supported job runner. This lets you scale the
same pipelines from your local machine to an HPC cluster.</p>

<h2 id="installation">Installation</h2>

<p><a href="/download?project=sbs">Download</a> the <code>sbs</code> file and put it somewhere in your <code>$PATH</code>. No other installation
is required.</p>

<h2 id="usage">Usage</h2>

<pre><code>Usage: sbs {-d sbshome} command {options}

Commands:
  cancel      Cancel a job
  cleanup     Remove all completed jobs
  help        Help for a particular command
  hold        Hold a job from running until released
  release     Release a job
  run         Start running jobs
  shutdown    Stop running jobs (and cancel any currently running jobs)
  status      Get the run status of a job (run state)
  submit      Submit a new job to the queue
</code></pre>

<h2 id="example">Example</h2>

<pre><code>$ sbs submit job1.sh
1

$ sbs submit job2.sh
2

$ sbs status
job-id   job-name   status   submit                start   end
1        sbs.1      H        2017-04-12 23:41:47              
2        sbs.2      H        2017-04-12 23:41:48              

$ sbs run
</code></pre>

<h2 id="job-options">Job options</h2>

<p>SBS job scripts support a number of configurable options. Like PBS, SGE, or SLURM,
these values can be set as arguments at submit time or as part of the script itself.
<code>sbs submit</code> will read a job script from a filename or from stdin. Options can be set
within the script if the line starts with <code>#SBS</code>.</p>

<p>Here are the available options:</p>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>-name job-name</td>
<td>The name of the job (easier to track than the number)</td>
</tr>

<tr>
<td>-mem val</td>
<td>Memory units to reserve: 2G, 200M, etc. (not enforced, just used for scheduling)</td>
</tr>

<tr>
<td>-procs N</td>
<td>Number of processor units to use (not enforced, just used for scheduling)</td>
</tr>

<tr>
<td>-mail email@example.com</td>
<td>Email when the job starts and finishes</td>
</tr>

<tr>
<td>-hold</td>
<td>Set a user-hold on the job. Job will not enter the queue until released</td>
</tr>

<tr>
<td>-stderr fname</td>
<td>Write stderr to this file (default: store in SBS job directory)</td>
</tr>

<tr>
<td>-stdout fname</td>
<td>Write stdout to this file (default: store in SBS job directory)</td>
</tr>

<tr>
<td>-wd</td>
<td>Working directory to use (default: current directory)</td>
</tr>

<tr>
<td>-afterok jobid1:jobid2:&hellip;</td>
<td>Dependent jobs - don&rsquo;t start this job until these jobs have finished successfully</td>
</tr>
</tbody>
</table>

<h3 id="example-script">Example script</h3>

<pre><code>#!/bin/bash
#SBS -name myjob
#SBS -procs 2

command-goes-here
</code></pre>

<h2 id="run-options">Run options</h2>

<p>Running jobs is a separate process and needs to be manually initiated.
Each job is independently executed as a new process. If a job ends with a return
code of <code>0</code>, it is considered a successful execution.</p>

<p>Here are the available run options:</p>

<table>
<thead>
<tr>
<th></th>
<th></th>
</tr>
</thead>

<tbody>
<tr>
<td>-maxprocs N</td>
<td>The maximum number of processors to schedule (default: all processors)</td>
</tr>

<tr>
<td>-maxmem val</td>
<td>The maximum amount of memory to manage (ex: 4G) (default: unlimited, not managed)</td>
</tr>

<tr>
<td>-forever</td>
<td>Keep waiting for new jobs after the job queue has completed (default: exit when all jobs are done)</td>
</tr>
</tbody>
</table>

<h2 id="sbs-directory">SBS directory</h2>

<p>The SBS home directory (where the job queue data is stored) is by default <code>./.sbs</code>, that is, in the current directory.
However, this can be set as an environmental variable: <code>$SBSHOME</code> or at the command line using <code>sbs -d dir command</code>.</p>

          </article>
    </div>
  </section>
</div>

<div class="footer_wrap">
<div class="footer">
<div>

<b>compgen.io</b>&nbsp;&nbsp;&middot;&nbsp;&nbsp;Copyright&nbsp;&copy;2016-2020
<br/><br/>

github:&nbsp; <a href="https://github.com/compgen-io">compgen-io</a> &sdot; 
<a href="https://github.com/mbreese">mbreese</a> &sdot; 
<a href="https://github.com/ngsutils">ngsutils</a>
</div>
</div>
</div>

</body>
